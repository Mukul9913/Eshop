<!DOCTYPE html>
<html lang="zxx">

<head>
    <!-- Meta Tag -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name='copyright' content=''>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Title Tag  -->
    <title>Eshop Shoping Site</title>
    <!-- Favicon -->
    <link rel="icon" type="/image/png" href="/images/favicon.png">
    <!-- Web Font -->
    <%- include('externallink.ejs')%>
</head>

<body class="js">

    <!-- Header -->
    <%- include('__header.ejs')%>

        <!-- Start Product Area -->
        <div class="product-area section">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-12">
                        <div class="section-title">
                            <h2>All Product List</h2>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="list-group col-2 col-md-2 ">
                        <h2> All Category</h2><br>
                        <%categoryList.map((category,index)=>{%>
                            <a href="/product/<%=category.categoryName%>"><button type="submit"
                                    class="list-group-item list-group-item-action btn">
                                    <%=category.categoryName%>
                                </button></a>
                            <%})%>
                    </div>

                    <div class="col-10">
                        <div class="product-info" id="product-display">
                            <div class="tab-content" id="myTabContent">
                                <!-- Start Single Tab -->

                                <div class="tab-pane fade show active" id="man" role="tabpanel">

                                    <div class="tab-single">
                                        <div class="row">
                                            <%productList.map((product,index)=>{%>
                                                <div class="col-xl-3 col-lg-4 col-md-4 col-12">
                                                    <div class="single-product"
                                                        style="background-color:whitesmoke; border: 1px solid rgb(207, 204, 204); border-radius: 2%; height: 400px;">
                                                        <div class="product-img text-center mt-3">
                                                            <a href="product-details.html">
                                                                <img class="default-img" src="<%=product.thumbnail%>"
                                                                    style="width: 230px;height: 230px; border-radius: 2%;"
                                                                    alt="#">
                                                            </a>
                                                            <div class="button-head">
                                                                <div class="product-action mx-3">
                                                                    <a title="Quick View"
                                                                        href="/product/view/<%=product.id%>"><i
                                                                            class=" ti-eye"></i><span>View
                                                                            More</span></a>
                                                                    <!-- <a title="Wishlist" href="#"><i
																			class=" ti-heart "></i><span>Add to
																			Wishlist</span></a> -->
                                                                    <!-- <a title="Compare" href="#"><i
																			class="ti-bar-chart-alt"></i><span>Add
																			to
																			Compare</span></a> -->
                                                                </div>

                                                                <div class="product-action-2">
                                                                    <%if(currentUser){%>
                                                                        <a><button type="submit" class="btn btn-warning"
                                                                                title="Add to cart"
                                                                                onclick="addToCart('<%=currentUser.id*1+1555%>','<%=product.id*1+2222%>')">Add
                                                                                to cart </button></a>
                                                                        <%}else{%>
                                                                            <a title="Add to cart"
                                                                                href="/cart/add-to-cart/''/''">Add
                                                                                to cart</a>
                                                                            <%}%>

                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="product-content text-center">
                                                            <h3><a href="product-details.html">
                                                                    <%=product.title%>
                                                                </a>
                                                            </h3>
                                                            <div class="product-price">
                                                                <span style="color: black;">MRP:
                                                                    <del style="color:red">&#8377;
                                                                        <%=product.price%>
                                                                    </del>
                                                                    <br>
                                                                </span>

                                                                <span>Deal of the day
                                                                    <i class="fa fa-rupee" aria-hidden="true"
                                                                        style="color:rgb(15, 214, 15);"><%=Math.round(product.price-(product.price*product.discountPercentage)
                                                                            /100)%></i>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <%})%>
                                        </div>
                                    </div>


                                </div>

                                <!--/ End Single Tab -->
                                <!-- Start Single Tab -->
                                <!--/ End Single Tab -->
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
        <!-- End Product Area -->

        <!-- Start Midium Banner  -->

        <!-- End Midium Banner -->

        <!-- Start Most Popular -->



        <!-- Start Shop Services Area -->



        <!-- /End Footer Area -->
        <%- include('__footer.ejs')%>
            <!-- Jquery -->
            <script>
                function addToCart(userId, productId) {
                    var xttp = new XMLHttpRequest();
                    xttp.open("GET", "/cart/add-to-cart/" + userId + "/" + productId, true);
                    xttp.send();
                    // console.log(xttp)
                    xttp.onreadystatechange = function () {
                        if (xttp.readyState == 4) {
                            let data = JSON.parse(xttp.responseText);
                            window.alert(data.message);
                        }
                    }
                }
            </script>
            <!-- Popper JS -->
            <script src="js/popper.min.js"></script>
            <!-- Bootstrap JS -->
            <script src="js/bootstrap.min.js"></script>
            <!-- Color JS -->
            <script src="js/colors.js"></script>
            <!-- Slicknav JS -->
            <script src="js/slicknav.min.js"></script>
            <!-- Owl Carousel JS -->
            <script src="js/owl-carousel.js"></script>
            <!-- Magnific Popup JS -->
            <script src="js/magnific-popup.js"></script>
            <!-- Waypoints JS -->
            <script src="js/waypoints.min.js"></script>
            <!-- Countdown JS -->
            <script src="js/finalcountdown.min.js"></script>
            <!-- Nice Select JS -->
            <script src="js/nicesellect.js"></script>
            <!-- Flex Slider JS -->
            <script src="js/flex-slider.js"></script>
            <!-- ScrollUp JS -->
            <script src="js/scrollup.js"></script>
            <!-- Onepage Nav JS -->
            <script src="js/onepage-nav.min.js"></script>
            <!-- Easing JS -->
            <script src="js/easing.js"></script>
            <!-- Active JS -->
            <script src="js/active.js"></script>

</body>

</html>